import{d as C,u as B,g as E,r as d,o as _,c as e,F as x,i as o,f as r}from"./vendor.1cf0e469.js";import{L as N,f as p}from"./index.2be1fe0f.js";var b="/assets/icon_quiet@2x.8dc22337.png",v;(function(u){u[u.\u4E00=0]="\u4E00",u[u.\u4E8C=1]="\u4E8C",u[u.\u4E09=2]="\u4E09",u[u.\u56DB=3]="\u56DB",u[u.\u4E94=4]="\u4E94"})(v||(v={}));var A=C({setup(u){var f,F;const s=B(),c=E(),l=d({matching:{},surgical:[],miss:[]}),i=d(!1),t=d({department:(f=s.query)==null?void 0:f.department,roomName:(F=s.query)==null?void 0:F.room_name}),g=()=>{var a,n,h;p({statetext:"\u547C\u53EB",room_name:(a=s.query)==null?void 0:a.room_name}).then(m=>{l.value.matching=m.values().next().value}),p({statetext:"\u7B49\u5019",department:(n=s.query)==null?void 0:n.department}).then(m=>{m.length=3,l.value.surgical=m}),p({statetext:"\u8FC7\u53F7",room_name:(h=s.query)==null?void 0:h.room_name}).then(m=>{l.value.miss=m})},q=()=>{i.value=!1,localStorage.setItem("department",t.value.department),localStorage.setItem("room_name",t.value.roomName),c.push({name:"Triage",query:{department:t.value.department,room_name:t.value.roomName}})};return _(()=>{let a=localStorage.getItem("department"),n=localStorage.getItem("room_name");a&&n?c.push({name:"Triage",query:{department:a,room_name:n}}):i.value=!0,g(),setInterval(()=>g(),1e3*5)}),()=>e(x,null,[e(o("a-modal"),{visible:i.value,"onUpdate:visible":a=>i.value=a,onOk:q},{default:()=>[e(o("a-form"),{model:t.value},{default:()=>[e(o("a-form-item"),null,{default:()=>[e(o("a-input"),{value:t.value.department,"onUpdate:value":a=>t.value.department=a,placeholder:"\u79D1\u5BA4"},null)]}),e(o("a-form-item"),null,{default:()=>[e(o("a-input"),{value:t.value.roomName,"onUpdate:value":a=>t.value.roomName=a,placeholder:"\u79D1\u5BA4\u623F\u95F4"},null)]})]})]}),e(N,null,null),e("div",{class:"signboard-wrapper"},[e("section",{class:"signboard"},[e("div",{class:"doctor"},[r("\u533B\u751F"),e("span",null,[l.value.matching.doctor])]),e("div",{class:"match"},[r("\u6B63\u5728\u5C31\u8BCA"),e("span",null,[l.value.matching.name])]),e("div",{class:"quiet"},[e("div",{class:"quiet-tips"},[e("img",{src:b},null),r("\u8BF7\u4FDD\u6301\u5B89\u9759\uFF0C "),e("br",null,null),r("\u8C22\u8C22\u60A8\u7684\u5408\u4F5C\uFF01")]),e("p",{class:"quiet-alert"},[r("\u8BF7\u5728\u95E8\u53E3\u8010\u5FC3\u7B49\u5F85\u53EB\u53F7")])]),e("div",{class:"queue"},[l.value.surgical.map((a,n)=>e("p",null,[r("\u5019\u8BCA"),v[n],e("span",null,[a.name])]))])]),e("p",{class:"miss"},[r("\u8FC7\u53F7\u60A3\u8005\uFF1A"),l.value.miss.map(a=>l.value.miss.length>1?a.name+"\u3001":a.name)])])])}});export{A as default};
